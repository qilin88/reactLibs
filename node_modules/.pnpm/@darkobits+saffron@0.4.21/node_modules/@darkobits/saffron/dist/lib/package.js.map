{"version":3,"sources":["../../src/lib/package.ts"],"names":["fs","path","readPackageUpSync","cachedPackageResult","pkgJson","undefined","pkgRoot","getPackageInfo","Object","keys","length","execPath","dirname","realpathSync","process","argv","packageResult","cwd","packageJson"],"mappings":"AAAA,OAAOA,EAAP;AACA,OAAOC,IAAP;AAEA,SAASC,iBAAT;AAeA,MAAMC,mBAAgC,GAAG;AACvCC,EAAAA,OAAO,EAAEC,SAD8B;AAEvCC,EAAAA,OAAO,EAAED;AAF8B,CAAzC;AAUA,eAAe,SAASE,cAAT,GAAuC;AACpD,MAAIC,MAAM,CAACC,IAAP,CAAYN,mBAAZ,EAAiCO,MAAjC,KAA4C,CAAhD,EAAmD;AACjD,UAAMC,QAAQ,GAAGV,IAAI,CAACW,OAAL,CAAaZ,EAAE,CAACa,YAAH,CAAgBC,OAAO,CAACC,IAAR,CAAa,CAAb,CAAhB,CAAb,CAAjB;AAEA,UAAMC,aAAa,GAAGd,iBAAiB,CAAC;AAAEe,MAAAA,GAAG,EAAEN;AAAP,KAAD,CAAvC;;AAEA,QAAIK,aAAJ,EAAmB;AACjBb,MAAAA,mBAAmB,CAACC,OAApB,GAA8BY,aAAa,CAACE,WAA5C;AACAf,MAAAA,mBAAmB,CAACG,OAApB,GAA8BL,IAAI,CAACW,OAAL,CAAaI,aAAa,CAACf,IAA3B,CAA9B;AACD;AACF;;AAED,SAAOE,mBAAP;AACD","sourcesContent":["import fs from 'fs';\nimport path from 'path';\n\nimport { readPackageUpSync, NormalizedPackageJson } from 'read-pkg-up';\n\n\n/**\n * Object returned by getPackageInfo.\n */\nexport interface PackageData {\n  pkgJson: NormalizedPackageJson | undefined;\n  pkgRoot: string | undefined;\n}\n\n\n/**\n * Module-local cached result from read-pkg-up.\n */\nconst cachedPackageResult: PackageData = {\n  pkgJson: undefined,\n  pkgRoot: undefined\n};\n\n\n/**\n * Loads the package.json of the host application, if one exists, and caches the\n * result.\n */\nexport default function getPackageInfo(): PackageData {\n  if (Object.keys(cachedPackageResult).length === 0) {\n    const execPath = path.dirname(fs.realpathSync(process.argv[1]));\n\n    const packageResult = readPackageUpSync({ cwd: execPath });\n\n    if (packageResult) {\n      cachedPackageResult.pkgJson = packageResult.packageJson;\n      cachedPackageResult.pkgRoot = path.dirname(packageResult.path);\n    }\n  }\n\n  return cachedPackageResult;\n}\n"],"file":"package.js"}