{"version":3,"sources":["../../src/lib/timer.ts"],"names":["DEFAULT_OPTIONS","secondsDecimalDigits","TimerFactory","userTimerOptions","timer","timerOptions","ow","any","undefined","number","integer","greaterThanOrEqual","millisecondsDecimalDigits","keepDecimalsOnWholeSeconds","boolean","compact","unitCount","verbose","separateMilliseconds","formatSubMilliseconds","startTime","Date","now","reset","toString"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AA8BA,MAAMA,eAA6B,GAAG;AACpCC,EAAAA,oBAAoB,EAAE;AADc,CAAtC;;AASe,SAASC,YAAT,CAAsBC,gBAA8B,GAAG,EAAvD,EAA2D;AACxE,QAAMC,KAAK,GAAG,kCAAd;AAGA,QAAMC,YAAY,GAAG,wBAAoBL,eAApB,EAAqCG,gBAArC,CAArB;AACA,mBAAGE,YAAY,CAACJ,oBAAhB,EAAsC,sBAAtC,EAA8DK,YAAGC,GAAH,CAAOD,YAAGE,SAAV,EAAqBF,YAAGG,MAAH,CAAUC,OAAV,CAAkBC,kBAAlB,CAAqC,CAArC,CAArB,CAA9D;AACA,mBAAGN,YAAY,CAACO,yBAAhB,EAA2C,2BAA3C,EAAwEN,YAAGC,GAAH,CAAOD,YAAGE,SAAV,EAAqBF,YAAGG,MAAH,CAAUC,OAAV,CAAkBC,kBAAlB,CAAqC,CAArC,CAArB,CAAxE;AACA,mBAAGN,YAAY,CAACQ,0BAAhB,EAA4C,4BAA5C,EAA0EP,YAAGC,GAAH,CAAOD,YAAGE,SAAV,EAAqBF,YAAGQ,OAAxB,CAA1E;AACA,mBAAGT,YAAY,CAACU,OAAhB,EAAyB,SAAzB,EAAoCT,YAAGC,GAAH,CAAOD,YAAGE,SAAV,EAAqBF,YAAGQ,OAAxB,CAApC;AACA,mBAAGT,YAAY,CAACW,SAAhB,EAA2B,WAA3B,EAAwCV,YAAGC,GAAH,CAAOD,YAAGE,SAAV,EAAqBF,YAAGG,MAAH,CAAUC,OAAV,CAAkBC,kBAAlB,CAAqC,CAArC,CAArB,CAAxC;AACA,mBAAGN,YAAY,CAACY,OAAhB,EAAyB,SAAzB,EAAoCX,YAAGC,GAAH,CAAOD,YAAGE,SAAV,EAAqBF,YAAGQ,OAAxB,CAApC;AACA,mBAAGT,YAAY,CAACa,oBAAhB,EAAsC,sBAAtC,EAA8DZ,YAAGC,GAAH,CAAOD,YAAGE,SAAV,EAAqBF,YAAGQ,OAAxB,CAA9D;AACA,mBAAGT,YAAY,CAACc,qBAAhB,EAAuC,uBAAvC,EAAgEb,YAAGC,GAAH,CAAOD,YAAGE,SAAV,EAAqBF,YAAGQ,OAAxB,CAAhE;AAQA,MAAIM,SAAS,GAAGC,IAAI,CAACC,GAAL,EAAhB;;AAGAlB,EAAAA,KAAK,CAACmB,KAAN,GAAc,MAAM;AAClBH,IAAAA,SAAS,GAAGC,IAAI,CAACC,GAAL,EAAZ;AACD,GAFD;;AAKAlB,EAAAA,KAAK,CAACoB,QAAN,GAAiB,MAAM;AACrB,WAAO,uBAASH,IAAI,CAACC,GAAL,KAAaF,SAAtB,EAAiCf,YAAjC,CAAP;AACD,GAFD;;AAKA,SAAOD,KAAP;AACD","sourcesContent":["import merge from 'deepmerge';\nimport ow from 'ow';\nimport prettyMs from 'pretty-ms';\nimport {createOrphanedObject} from 'lib/utils';\n\n\n/**\n * Options object accepted by TimerFactory and #createTimer.\n *\n * See: https://github.com/sindresorhus/pretty-ms/blob/master/index.d.ts#L2-L64\n */\nexport type TimerOptions = prettyMs.Options;\n\n\n/**\n * Object returned by TimerFactory and #createTimer.\n */\nexport interface Timer {\n  /**\n   * Resets the elapsed time of the timer to zero.\n   */\n  reset(): void;\n\n  /**\n   * Renders the current elapsed time using `pretty-ms`.\n   */\n  toString(): string;\n}\n\n\n/**\n * Default timer formatting options.\n */\nconst DEFAULT_OPTIONS: TimerOptions = {\n  secondsDecimalDigits: 0\n};\n\n\n/**\n * Creates a new timer using the provided options. The returned value may be\n * used directly in an interpolated string.\n */\nexport default function TimerFactory(userTimerOptions: TimerOptions = {}) {\n  const timer = createOrphanedObject<Timer>();\n\n  // Merge and validate options.\n  const timerOptions = merge<TimerOptions>(DEFAULT_OPTIONS, userTimerOptions);\n  ow(timerOptions.secondsDecimalDigits, 'secondsDecimalDigits', ow.any(ow.undefined, ow.number.integer.greaterThanOrEqual(0)));\n  ow(timerOptions.millisecondsDecimalDigits, 'millisecondsDecimalDigits', ow.any(ow.undefined, ow.number.integer.greaterThanOrEqual(0)));\n  ow(timerOptions.keepDecimalsOnWholeSeconds, 'keepDecimalsOnWholeSeconds', ow.any(ow.undefined, ow.boolean));\n  ow(timerOptions.compact, 'compact', ow.any(ow.undefined, ow.boolean));\n  ow(timerOptions.unitCount, 'unitCount', ow.any(ow.undefined, ow.number.integer.greaterThanOrEqual(0)));\n  ow(timerOptions.verbose, 'verbose', ow.any(ow.undefined, ow.boolean));\n  ow(timerOptions.separateMilliseconds, 'separateMilliseconds', ow.any(ow.undefined, ow.boolean));\n  ow(timerOptions.formatSubMilliseconds, 'formatSubMilliseconds', ow.any(ow.undefined, ow.boolean));\n\n\n  /**\n   * @private\n   *\n   * Mark the time when the spinner was created.\n   */\n  let startTime = Date.now();\n\n\n  timer.reset = () => {\n    startTime = Date.now();\n  };\n\n\n  timer.toString = () => {\n    return prettyMs(Date.now() - startTime, timerOptions);\n  };\n\n\n  return timer;\n}\n"],"file":"timer.js"}