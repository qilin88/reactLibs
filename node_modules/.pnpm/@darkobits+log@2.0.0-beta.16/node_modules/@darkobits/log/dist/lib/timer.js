"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = TimerFactory;

var _deepmerge = _interopRequireDefault(require("deepmerge"));

var _ow = _interopRequireDefault(require("ow"));

var _prettyMs = _interopRequireDefault(require("pretty-ms"));

var _utils = require("./utils");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const DEFAULT_OPTIONS = {
  secondsDecimalDigits: 0
};

function TimerFactory(userTimerOptions = {}) {
  const timer = (0, _utils.createOrphanedObject)();
  const timerOptions = (0, _deepmerge.default)(DEFAULT_OPTIONS, userTimerOptions);
  (0, _ow.default)(timerOptions.secondsDecimalDigits, 'secondsDecimalDigits', _ow.default.any(_ow.default.undefined, _ow.default.number.integer.greaterThanOrEqual(0)));
  (0, _ow.default)(timerOptions.millisecondsDecimalDigits, 'millisecondsDecimalDigits', _ow.default.any(_ow.default.undefined, _ow.default.number.integer.greaterThanOrEqual(0)));
  (0, _ow.default)(timerOptions.keepDecimalsOnWholeSeconds, 'keepDecimalsOnWholeSeconds', _ow.default.any(_ow.default.undefined, _ow.default.boolean));
  (0, _ow.default)(timerOptions.compact, 'compact', _ow.default.any(_ow.default.undefined, _ow.default.boolean));
  (0, _ow.default)(timerOptions.unitCount, 'unitCount', _ow.default.any(_ow.default.undefined, _ow.default.number.integer.greaterThanOrEqual(0)));
  (0, _ow.default)(timerOptions.verbose, 'verbose', _ow.default.any(_ow.default.undefined, _ow.default.boolean));
  (0, _ow.default)(timerOptions.separateMilliseconds, 'separateMilliseconds', _ow.default.any(_ow.default.undefined, _ow.default.boolean));
  (0, _ow.default)(timerOptions.formatSubMilliseconds, 'formatSubMilliseconds', _ow.default.any(_ow.default.undefined, _ow.default.boolean));
  let startTime = Date.now();

  timer.reset = () => {
    startTime = Date.now();
  };

  timer.toString = () => {
    return (0, _prettyMs.default)(Date.now() - startTime, timerOptions);
  };

  return timer;
}

module.exports = exports.default;
//# sourceMappingURL=timer.js.map